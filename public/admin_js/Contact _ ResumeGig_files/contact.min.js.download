!function(r,l){var i,t,e;function a(t){if(t.name&&(t.name.name!=r("#hdnDefaultContactInfo").val()&&t.name.name!=r("#hdnDefaultContactName").val()&&(r("#txtName").val(t.name.name),""!=t.name.name&&v(t.name.name)),r("#hdnNameSectionId").val(t.name.sectionId),r("#hdnNameParaId").val(t.name.paragraphId)),t.contact&&(r("#txtAddress").val(t.contact.address),r("#txtCity").val(t.contact.city),r("#txtState").val(t.contact.state),r("#txtCountry").val(t.contact.country),r("#txtZipCode").val(t.contact.zipCode),r("#txtEmail").val(t.contact.email),r("#txtPhone").val(t.contact.phone),r("#hdnContactSectionId").val(t.contact.sectionId),r("#hdnContactParaId").val(t.contact.paragraphId),t.contact.country&&""!=t.contact.country&&null!=t.contact.country)){var e=r(".country");r("#chkCountryShow").prop("checked",!0),e.removeClass("display-none"),e.find(".input-element").removeClass("valid")}}function n(t){var e=r.Deferred();t&&t.preventDefault&&t.preventDefault(),0<r("#chkCountryShow").length&&!r("#chkCountryShow").prop("checked")&&r("#txtCountry").val("");var a,n=!1;if(s()&&d())if(l.ChangeTracker.HasChanged()&&0<i){var o=(a=0<r("#txtCountry").length?r("#txtCountry").val():"",0<r("#chkCountryShow").length&&!r("#chkCountryShow").prop("checked")&&(a=""),{name:{name:r("#txtName").val(),sectionId:parseInt(r("#hdnNameSectionId").val()),paragraphId:parseInt(r("#hdnNameParaId").val())},contact:{address:r("#txtAddress").val(),city:r("#txtCity").val(),state:r("#txtState").val(),zipCode:r("#txtZipCode").val(),country:a,email:r.trim(r("#txtEmail").val()),phone:r("#txtPhone").val(),sectionId:parseInt(r("#hdnContactSectionId").val()),paragraphId:parseInt(r("#hdnContactParaId").val())}});l.Ajax.Post({url:l.Urls.Get("SaveContactInfo"),data:o}).then(function(t){t&&(l.Storage.SetSection(i,"contactInfo",t),n=!0),e.resolve(n)})}else n=!0,e.resolve(n);else n=!1,e.resolve(n);return e.promise()}function o(){l.ChangeTracker.Track({selector:"form input[type=text],input[type=email],input[type=number],select"})}function d(){r("#errEmailValid").hide();var t=r("#txtEmail").val();return"1"!=r("#hdnIsContactAffiliation").val()||t?t?l.Validation.VerifyEmail(t)?(r("#txtEmail").parent(".input-element").removeClass("invalid").addClass("valid"),!0):(r("#errEmailValid").show(),r("#txtEmail").parent(".input-element").removeClass("valid").addClass("invalid"),!1):(r("#txtEmail").parent(".input-element").removeClass("invalid"),!0):(r("#errEmailValid").show(),r("#txtEmail").parent(".input-element").removeClass("valid").addClass("invalid"),!1)}function s(){r("#errPhoneValidMsg").hide();var t=r("#txtPhone").val();return t?20<t.length?(r("#txtPhone").parent(".input-element").removeClass("valid").addClass("invalid"),!1):new RegExp("^[0-9()\\-\\\\.\\+ ]+$").test(t)?(r("#txtPhone").parent(".input-element").removeClass("invalid").addClass("valid"),!0):(r("#errPhoneValidMsg").show(),r("#txtPhone").parent(".input-element").removeClass("valid").addClass("invalid"),!1):(r("#txtPhone").parent(".input-element").removeClass("invalid"),!0)}function c(t){n(t).then(function(t){t&&(location.href=l.Urls.Get("NextRoute"))})}function v(t){var e=t.lastIndexOf(" "),a="",n="",o="",l="";0<e?(a=t.substring(0,e),n=t.substring(e+1),o=a.charAt(0),l=n.charAt(0)):o=(a=t).charAt(0),r("#skinUserName").find(".first-name").text(a),r("#skinUserName").find(".last-name").text(n),r("#skinUserNameInitials").find(".first-name").text(o),r("#skinUserNameInitials").find(".last-name").text(l)}i=r("#hdnDocumentId").val(),"true"==r("#hdnIsEditMode").val()||"true"==r("#hdnLoadData").val()?(e=l.Storage.GetSection(i,"contactInfo"))?(a(e),o()):l.Ajax.Get({url:l.Urls.Get("GetContactInfo")}).then(function(t){t&&(a(t),o(),l.Storage.SetSection(i,"contactInfo",t))}):(t=l.Urls.Get("GetDefaultContactInfo"))&&l.Ajax.Get({url:t}).then(function(t){t&&a(t)}),l.Plugin("google").Ready(function(){l.Places.Init({elemId:"txtAddress",fields:{txtAddress:"route",txtCity:"locality",txtState:"administrative_area_level_1",txtZipCode:"postal_code",txtCountry:"country"},types:["address"],wizard:"address",minCharReqd:"9",placeChanged:function(){l.Form.SetFocusOnEle("txtEmail")}})}),r(function(){r("#txtEmail").on("blur",function(){d()}),r("#txtPhone").on("blur",function(){s()}),r("#btnSaveAndNext").on("click",c),r("#txtName").on("input propertychange paste",function(t){var e=r.trim(r(this).val());e||(e=r("#skinUserName").attr("data-default")),v(e)}),r("#btnCloseUploadPopup").on("click",function(){var t=r("#uploadStatusPopup");l.PopUp.AddTransition(t),l.PopUp.RemoveTransition(t)}),l.ProgressBar.On("save",n),0<r("#hdnIsIpad").length&&(l.Form.EnableTabbing("btnSaveAndNext"),l.Form.ScrollScreenForRecords("#txtAddress, #txtCity")),r("#chkCountryShow").on("click",function(){var t=r(".country");this.checked?(t.removeClass("display-none"),t.find(".input-element").removeClass("valid")):t.addClass("display-none")})})}(window.jQuery,window.RB3);
//# sourceMappingURL=contact.min.js.map
